\documentclass[12pt,aspectratio=169]{beamer}
\usetheme{default}
\usecolortheme{dolphin}
\usefonttheme{structurebold}
\setbeamertemplate{footline}[frame number]

\title{ShellScript 01}
\author{@aoirint}
\date{2020/04/16}
%\institute{}

\begin{document}

% 01
\frame{\maketitle}

% 02
\begin{frame}{テキスト}

  \begin{minipage}{0.58\textwidth}
    \begin{itemize}
      \item 新しいシェルプログラミングの教科書
      \begin{itemize}
        \item 著・三宅英明
        \item 刊・SB Creative
      \end{itemize}
    \end{itemize}
  \end{minipage}
  \hfill
  \begin{minipage}{0.38\textwidth}
    \vspace{-4\baselineskip}
    \begin{center}
      \includegraphics[width=5cm,bb=0 0 467 596]{./images/shellbook.jpg}
    \end{center}
  \end{minipage}

  \begin{itemize}
    \item 書影
    \begin{itemize}
      \item { \small \url{https://www.sbcr.jp/product/4797393101/} }
    \end{itemize}
  \end{itemize}

\end{frame}


\begin{frame}{シェル：GUI（Graphical User Interface）}

  \begin{minipage}{0.45\textwidth}
    \includegraphics[width=6cm,bb=0 0 659 481]{./images/explorer.png}
    Explorer（Windows）
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \includegraphics[width=6cm,bb=0 0 892 640]{./images/nautilus.png}
    Nautilus（Ubuntu, Gnome）
  \end{minipage}

\end{frame}


\begin{frame}{シェル：CLI（Command Line Interface）}

  \begin{minipage}{0.3\textwidth}
    \includegraphics[width=1.2\linewidth,bb=0 0 698 412]{./images/cmd.png}
    コマンドプロンプト（Windows）

    \includegraphics[width=1.2\linewidth,bb=0 0 620 388]{./images/powershell.png}
    PowerShell（Windows）
  \end{minipage}
  \hfill
  \begin{minipage}{0.3\textwidth}
    \includegraphics[width=\linewidth,bb=0 0 734 487]{./images/ubuntu-gnome.png}
    \begin{flushleft} \small Terminal（Ubuntu,Gnome） \end{flushleft}
    \includegraphics[width=\linewidth,bb=0 0 734 487]{./images/ubuntu-cli.jpg}
    CLI（Ubuntu）
  \end{minipage}
  \hfill
  \begin{minipage}{0.3\textwidth}
    \vspace{-5\baselineskip}
    \includegraphics[width=2.0\linewidth,bb=0 0 1144 735]{./images/mac-basic.png}
    Terminal（macOS）
  \end{minipage}

\end{frame}

\begin{frame}{シェルはどこに位置するか}
  \centering
  \includegraphics[width=12cm,bb=0 0 741 281]{./images/shell.png}

\end{frame}

\begin{frame}{OSとカーネル}
  \begin{itemize}
    \item カーネル（Kernel）
      \begin{itemize}
        \item OSの核となる（中心的な）機能の実装
          \begin{itemize}
            \item ファイルシステム、ネットワーク、入出力、プロセス管理など
          \end{itemize}
        \item 例：Linuxカーネル、macOSカーネル（XNU）、Windowsカーネル
        \item 余談：Linuxディストリビューションと呼ばれるOSのカーネルはLinuxカーネルをベースにしている
          \begin{itemize}
            \item Debian GNU/Linux、Ubuntu、CentOSなど
          \end{itemize}
      \end{itemize}

      \item OS
        \begin{itemize}
          \item カーネルにハードウェアドライバや標準のソフトウェアなどを追加したパッケージ
          \item 例：Ubuntu、CentOS、macOS、Windows（バージョン略）
        \end{itemize}

      \item 例：C言語のfopen, fprintf, fcloseはファイルシステムに関するカーネルの機能を（最終的に）呼び出す関数（システムコール）
  \end{itemize}

\end{frame}


\begin{frame}{シェルとコマンド 1/2}
  \begin{itemize}
    \item シェル（Shell）
      \begin{itemize}
        \item コマンドによりカーネルの機能を利用するためのアプリケーションの一種
          \begin{itemize}
            \item 例：ファイルの作成、削除、プロセス管理、他のアプリケーションの起動
          \end{itemize}
        \item ユーザに提供されるコマンドベースのカーネルへのインタフェース
          \begin{itemize}
            \item カーネル/核 の 殻/シェル
          \end{itemize}
        \item 例：sh, bash, zsh, csh, コマンドプロンプト（cmd.exe）, PowerShellなど
        \item *shという名前のシェルはよく共通のコマンドを持っている
      \end{itemize}
    \item シェルのコマンド
      \begin{itemize}
        \item 例：*shのコマンドls、cmd.exeのコマンドdir、PowerShellのコマンドGet-ChildItemはディレクトリ中のファイルリストを表示する
      \end{itemize}
  \end{itemize}

\end{frame}


\begin{frame}{シェルとコマンド 2/2}
  \begin{itemize}
    \item シェルのコマンド
      \begin{itemize}
        \item 例：*shのコマンドls、cmd.exeのコマンドdir、PowerShellのコマンドGet-ChildItemはディレクトリ中のファイルリストを表示する
      \end{itemize}
  \end{itemize}

  \centering {
    \includegraphics[width=6cm,bb=0 0 659 481]{./images/ls.png}
  }

\end{frame}


\begin{frame}{Explorerもシェル}

  \begin{minipage}{0.45\textwidth}
    \begin{itemize}
      \item Explorer（Windows）もシェル
        \begin{itemize}
          \item GUIなのにコマンド？
        \end{itemize}
      \item 例：コンテキストメニュー（右クリックメニュー）の動作
        \begin{itemize}
          \item レジストリ中にテキスト形式のコマンドで定義されている
          \item { \tiny 余談 }
            \begin{itemize}
              \item { \tiny レジストリを編集すれば自分でメニューを追加することもできる（間違ったところをいじらないように注意は必要） }
              \item { \tiny u\_atomhere, u\_conemuhereは自分で追加した項目 }
            \end{itemize}
        \end{itemize}
    \end{itemize}

  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \includegraphics[width=6cm,bb=0 0 659 481]{./images/regedit.png}
    { \tiny Windowsのレジストリ（フォルダをShift+右クリックしたときの「PowerShellで開く」コマンド） }
  \end{minipage}

\end{frame}


\begin{frame}{シェルとプロセス 1/2}
  \begin{itemize}
    \item テキストではbashを題材にしているので、ここからはbashを前提とする
    \item プロセスの親子関係
      \begin{itemize}
        \item シェル上でコマンドを実行したとき、シェルのプロセスに対する子プロセスが生成される
      \end{itemize}
    \item 子プロセス
      \begin{itemize}
        \item 親となるプロセスのメモリ内容（アドレス空間）をコピーして作られる
        \item メモリがコピーされているため、親プロセスのシェル上の環境変数などを引き継ぐ
        \item プログラムを呼び出すコマンドが実行されると、forkシステムコールにより子プロセスが生成されたあと、exec系システムコールによりプログラムが子プロセスのアドレス空間に読み出される
      \end{itemize}

  \end{itemize}

\end{frame}


\begin{frame}{シェルとプロセス 2/2}
  \begin{itemize}
    \item psコマンド
      \begin{itemize}
        \item プロセスリストを表示するコマンド
        \item ps fはプロセスの親子関係をグラフィカルに表示する
      \end{itemize}
    \item 親プロセスはbash(ID 24537)、プログラム/usr/bin/bashを呼び出して子プロセスbash（ID 24599）が生成されている
      \begin{itemize}
        \item また、psコマンド自体も子プロセスとして実行されている
      \end{itemize}
  \end{itemize}

  \centering {
    \includegraphics[width=6cm,bb=0 0 734 487]{./images/child-process.png}
  }

\end{frame}


\begin{frame}{以上です}
てすと

\end{frame}


\begin{frame}{参考資料：Beamer}
  \begin{itemize}
    \item \url { https://qiita.com/yt_siden/items/aaac54f6389a8068a4ee }
    \item \url { https://qiita.com/termoshtt/items/756aec542fb4c812a405 }
    \item \url { https://www.opt.mist.i.u-tokyo.ac.jp/~tasuku/beamer.html }
  \end{itemize}

\end{frame}


\begin{frame}{参考資料：OS, カーネル}
  \begin{itemize}
    \item \url { https://ja.wikipedia.org/wiki/Microsoft_Windows }
    \item \texttt {https://ja.wikipedia.org/wiki/Linux\%E3\%83\%87\%E3\%82\%A3 \\ \%E3\%82\%B9\%E3\%83\%88\%E3\%83\%AA\%E3\%83\%93\%E3\%83\%A5\%E3\%83\%BC \\ \%E3\%82\%B7\%E3\%83\%A7\%E3\%83\%B3 }
    \item \url { https://ja.wikipedia.org/wiki/POSIX }
    \item \url { https://ja.wikipedia.org/wiki/Debian }
    \item \url { https://ja.wikipedia.org/wiki/MacOS }
    \item \url { https://ja.wikipedia.org/wiki/XNU }
    \item \url { https://www.atmarkit.co.jp/ait/articles/1112/13/news117.html }
    \item \texttt {https://ja.wikipedia.org/wiki/\%E3\%82\%AA\%E3\%83\%9A \\ \%E3\%83\%AC\%E3\%83\%BC\%E3\%83\%86\%E3\%82\%A3\%E3\%83\%B3\%E3\%82\%B0 \\ \%E3\%82\%B7\%E3\%82\%B9\%E3\%83\%86\%E3\%83\%A0 }
  \end{itemize}

\end{frame}

\begin{frame}{参考資料：プロセス}
  \begin{itemize}
    \item \url { https://ja.wikipedia.org/wiki/Fork }
    \item \url { https://kazmax.zpp.jp/linux_beginner/process_ps.html }
  \end{itemize}

\end{frame}


\begin{frame}{参考資料：Windows スクリプト}
  \begin{itemize}
    \item https://docs.microsoft.com/ja-jp/powershell/scripting/samples/\\ working-with-files-and-folders
  \end{itemize}

\end{frame}


\end{document}
